<metro:Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:metro="http://schemas.codeplex.com/elysium"
    xmlns:params="http://schemas.codeplex.com/elysium/params"
    xmlns:mui ="http://firstfloorsoftware.com/ModernUI"
    xmlns:properties="clr-namespace:TinyClient.Properties"
    
    xmlns:api="clr-namespace:TinyClient.Api"
    x:Class="TinyClient.MainWindow"
    Closing="Window_Closing" Width="810" MinWidth="750" Height="600" MinHeight="300" Title="TinyClient" Loaded="Window_Loaded" HasDropShadow="False" StateChanged="Window_StateChanged">
    <Grid x:Name="mainGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="52" />
        </Grid.RowDefinitions>

        <Image Grid.RowSpan="2" x:Name="Bg" Source="{Binding Source={x:Static properties:Settings.Default}, Path=backgroundImage, Mode=OneWay}" Stretch="UniformToFill" Opacity="{Binding Source={x:Static properties:Settings.Default}, Path=backgroundTransparency, Mode=TwoWay}" Visibility="{Binding backgroundEnabled, Converter={StaticResource VisibilityConverter}, Mode=OneWay, Source={x:Static properties:Settings.Default}}"/>
        <mui:ModernFrame Grid.Row="0" Source="Pages/PageStart.xaml" x:Name="MainFrame"/>
        <Grid Grid.Row="1" x:Name="PlayerGrid">
            <Border VerticalAlignment="Top" Height="0" Background="{Binding Source={x:Static properties:Settings.Default}, Path=accentColor, Mode=OneWay}" />
            <Button HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10,0,0,8" Command="{StaticResource PlayPause}" Style="{DynamicResource ButtonStyle1}" Width="36" Height="36" Content="M415.934,212.799L36.788,2.097C32.411-0.377,28.65-0.661,25.51,1.242c-3.14,1.902-4.708,5.328-4.708,10.276V431.78   c0,4.952,1.569,8.381,4.708,10.284c3.14,1.902,6.901,1.622,11.278-0.855l379.146-210.703c4.381-2.478,6.571-5.434,6.571-8.856   C422.505,218.224,420.314,215.274,415.934,212.799z" Padding="13,11,11,11" Background="White" BorderThickness="0" BorderBrush="{Binding Source={x:Static properties:Settings.Default}, Path=accentColor, Mode=Default}"/>
            <Button HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="52,0,0,14" Command="{StaticResource PlayPrev}" Style="{DynamicResource PlayerButton}" Width="24" Height="24" Content="M436.538,0.861c-2.471-1.143-5.513,0.094-9.134,3.709L224.692,207.273c-1.521,1.524-2.762,3.333-3.711,5.424V9.989   c0-4.948-1.237-7.994-3.711-9.137c-2.474-1.141-5.52,0.096-9.136,3.711L5.424,207.273C1.809,210.891,0,215.172,0,220.12   s1.809,9.233,5.424,12.847l202.71,202.709c3.616,3.62,6.662,4.862,9.136,3.72c2.474-1.144,3.711-4.189,3.711-9.138V227.546   c0.953,1.903,2.19,3.717,3.711,5.425l202.712,202.711c3.621,3.617,6.663,4.86,9.134,3.717c2.478-1.143,3.713-4.188,3.713-9.137   V9.996C440.248,5.048,439.015,2.002,436.538,0.861z" Padding="7" BorderThickness="0"/>
            <Button HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="76,0,0,14" Command="{StaticResource PlayNext}" Style="{DynamicResource PlayerButton}" Width="24" Height="24" Content="M434.823,207.279L232.111,4.571c-3.609-3.617-6.655-4.856-9.133-3.713c-2.475,1.143-3.712,4.189-3.712,9.137v202.708   c-0.949-2.091-2.187-3.901-3.711-5.424L12.847,4.571C9.229,0.954,6.186-0.285,3.711,0.858C1.237,2.001,0,5.047,0,9.995v420.262   c0,4.948,1.237,7.994,3.711,9.138c2.474,1.14,5.518-0.1,9.135-3.721l202.708-202.701c1.521-1.711,2.762-3.524,3.711-5.428v202.712   c0,4.948,1.237,7.991,3.712,9.131c2.478,1.143,5.523-0.093,9.133-3.714l202.712-202.708c3.61-3.617,5.428-7.901,5.428-12.847   C440.248,215.178,438.433,210.896,434.823,207.279z" Padding="7" BorderThickness="0"/>
            <Slider x:Name="Volume" Margin="0,0,10,0"
                IsMoveToPointEnabled="True"
                Maximum="100" Value="{Binding Source={x:Static properties:Settings.Default}, Path=volume, Mode=TwoWay}" SmallChange="1" Height="22" HorizontalAlignment="Right" VerticalAlignment="Bottom" Width="70" ValueChanged="Volume_ValueChanged" Style="{DynamicResource customSlider}" MouseUp="Volume_MouseUp"/>
            <Slider x:Name="Timeline"  Margin="110,0,85,0"
                IsMoveToPointEnabled="True"
                IsSelectionRangeEnabled="True" PreviewMouseUp="Timeline_PreviewMouseUp" Height="22" VerticalAlignment="Bottom" Style="{DynamicResource customSlider}" Maximum="100"/>
            <TextBlock Margin="110,0,95,23" TextWrapping="Wrap" VerticalAlignment="Bottom" Height="19" TextTrimming="CharacterEllipsis">
                <Run Text="{Binding Song.artist, Mode=OneWay}" FontWeight="Bold"></Run>
                <Run Text=" – "></Run>
                <Run Text="{Binding Song.title, Mode=OneWay}"></Run>
            </TextBlock>
            <ToggleButton x:Name="ShuffleToggle" Margin="0,0,63,27" VerticalAlignment="Bottom" HorizontalAlignment="Right" Style="{DynamicResource ToggleButton}" Width="20" Height="20" Padding="2,0,-4,-16" Click="ShuffleToggle_Click">
                <Viewbox Stretch="Fill">
                    <Grid>
                        <Path Data="F1 M 752.85,1101.04 L 755.09,1093.19 755.89,1093.19 753.65,1101.04 752.85,1101.04 z"  Fill="Transparent" />
                        <Path Data="F1 M 0,0 C 8.65,-20.82 16.18,-36.99 22.27,-48.84 26.91,-57.65 31.24,-65.02 35.24,-71.1 39.25,-77.03 44.06,-82.96 49.82,-88.72 55.43,-94.33 62.16,-98.65 69.53,-101.53 76.9,-104.42 85.23,-105.86 94.36,-105.86	L 167.74,-105.86 167.74,-50.93 C 167.74,-48.36 168.7,-46.28 170.47,-44.52 172.23,-42.6 174.47,-41.8 176.87,-41.8 179.6,-41.8 181.84,-42.6 183.44,-44.36 L 275.09,-135.97 C 276.85,-137.57 277.65,-139.81 277.65,-142.53	 277.65,-145.09 276.85,-147.34 275.09,-149.1 L 183.76,-240.38 C 181.52,-242.31 179.12,-243.27 176.87,-243.27 174.15,-243.27 172.07,-242.31 170.31,-240.71 168.54,-238.94 167.74,-236.7 167.74,-234.14 L 167.74,-179.05 94.36,-179.05 C 81.39,-179.05 69.21,-177.61 57.83,-174.4 46.3,-171.2 36.21,-167.2 27.23,-162.39 18.42,-157.59 9.77,-151.02 1.44,-142.69 -6.73,-134.52 -13.78,-126.68 -19.71,-118.99 -25.48,-111.3 -31.57,-101.85 -37.97,-90.32 -44.38,-78.95 -49.51,-68.86 -53.51,-60.37 -57.36,-51.73 -62.17,-41.16 -67.61,-28.5 -76.43,-7.84 -83.8,8.49 -89.88,20.34 -94.53,29.15 -98.86,36.52 -102.86,42.6 -106.87,48.53 -111.67,54.45 -117.44,60.22 -123.21,65.82 -129.78,70.15 -137.15,73.03 -144.68,75.91 -153.01,77.36 -162.14,77.36 L -226.23,77.36 C -228.95,77.36 -231.19,78.16 -232.79,79.92 -234.56,81.68 -235.36,83.76 -235.36,86.48 L -235.36,141.42 C -235.36,144.14 -234.56,146.38 -232.79,147.98 -231.03,149.74 -228.95,150.55 -226.23,150.55 L -162.14,150.55 C -149.16,150.55 -136.99,149.1 -125.45,145.9 -114.08,142.7 -103.82,138.69 -95.01,133.89 -86.04,128.92 -77.55,122.52 -69.22,114.19 -60.88,106.02 -53.83,98.18 -48.07,90.49 -42.14,82.8 -36.05,73.35 -29.64,61.82 -23.23,50.45 -18.11,40.36 -14.26,31.87 -10.26,23.22 -5.61,12.65 0,0 z" RenderTransform="1,0,0,1,274.13,309.41" Fill="{Binding Source={x:Static properties:Settings.Default}, Path=accentColor, Mode=Default}" />
                        <Path Data="F1 M 0,0 L 64.09,0 C 72.58,0 80.27,1.44 87.48,4.17 94.53,6.89 100.62,10.25 105.43,14.26 110.39,18.1 115.2,23.54 120.17,30.43 124.97,37.16 128.82,43.24 131.7,48.53 134.58,53.81 138.11,60.7 142.27,69.35 157.01,34.76 169.99,8.65 181.53,-8.81 150.93,-51.73 111.83,-73.19 64.09,-73.19 L 0,-73.19 C -2.72,-73.19 -4.96,-72.39 -6.56,-70.62 -8.33,-69.02 -9.13,-66.78 -9.13,-64.06 L -9.13,-9.13C -9.13,-6.4 -8.33,-4.32 -6.56,-2.56 -4.96,-0.8 -2.72,0 0,0 z" RenderTransform="1,0,0,1,47.9,203.55" Fill="{Binding Source={x:Static properties:Settings.Default}, Path=accentColor, Mode=Default}" />
                        <Path Data="F1 M 0,0 C -2.24,-1.76 -4.64,-2.72 -6.89,-2.72 -9.61,-2.72 -11.69,-1.92 -13.45,-0.16 -15.22,1.44 -16.02,3.68 -16.02,6.4 L -16.02,61.34 -89.4,61.34 C -97.73,61.34 -105.58,59.89 -112.63,57.17 -119.84,54.45 -125.77,51.09 -130.73,47.08 -135.54,43.24 -140.5,37.79 -145.31,30.91 -150.12,24.18 -153.96,18.09 -156.85,12.81 -159.73,7.52 -163.26,0.64 -167.42,-8.01 -182.16,26.42 -195.14,52.37 -206.51,70.14 -201.23,77.67 -195.94,84.24 -190.33,90 -184.88,95.93 -179.6,101.05 -174.63,105.38 -169.66,109.7 -164.06,113.55 -157.81,116.91 -151.4,120.11 -145.95,122.83 -141.15,125.08	 -136.34,127.16 -130.41,128.92 -123.04,130.36 -115.83,131.64 -109.74,132.6 -104.78,133.24 -99.81,133.88 -93.08,134.36 -84.43,134.69 -75.94,135.01 -68.89,135.17 -63.6,135.01 -58.15,134.85 -50.46,134.85 -40.37,134.69 -30.28,134.69 -22.11,134.53 -16.02,134.53L -16.02,189.62 C -16.02,192.02 -15.06,194.1 -13.29,196.02 -11.53,197.78 -9.29,198.75 -6.89,198.75 -4.16,198.75 -1.92,197.78 -0.32,196.18 L 91.33,104.58 C 93.09,102.82 93.89,100.57 93.89,98.01 93.89,95.29 93.09,93.05 91.33,91.44 L 0,0 z" RenderTransform="1,0,0,1,457.89,325.43" Fill="{Binding Source={x:Static properties:Settings.Default}, Path=accentColor, Mode=Default}" />
                    </Grid>
                </Viewbox>
            </ToggleButton>
            <ToggleButton x:Name="RepeatToggle" Margin="0,0,40,27" VerticalAlignment="Bottom" HorizontalAlignment="Right" Style="{DynamicResource ToggleButton}" Width="20" Height="20" Padding="2,1,-2,-12">
                <Viewbox Stretch="Fill" IsHitTestVisible="False">
                    <Grid>
                        <Path Data="F1 M 38.56,38.56 L 758.24,38.56 758.24,1085.44 38.56,1085.44 z"  Fill="Transparent" />
                        <Path Data="F1 M 0,0 L -117.27,-78.95 C -123.68,-83.12 -132.33,-78.63 -132.33,-70.95 L -132.33,-28.35 -466.38,-28.35C -486.25,-28.35 -502.59,-12.01 -502.59,8.01 L -502.59,200.51 -430.01,200.51 -430.01,44.36 -132.33,44.36 -132.33,86.96 C -132.33,94.81 -123.84,99.29 -117.43,94.97 L -0.16,16.02 C 5.61,12.17 5.61,3.84 0,0 z" RenderTransform="1,0,0,1,547.61,127" Clip="M -502.65,-83.16 L 4.39,-83.16 4.39,200.68 -502.65,200.68 z" Fill="{Binding Source={x:Static properties:Settings.Default}, Path=accentColor, Mode=Default}" />
                        <Path Data="F1 M 0,0 L -297.68,0 -297.68,-42.6 C -297.68,-50.45 -306.33,-54.94 -312.58,-50.61 L -430.01,28.18C -435.62,32.03 -435.62,40.35 -430.01,44.2 L -312.74,123.15 C -306.33,127.48 -297.84,122.99 -297.84,115.31	L -297.84,72.54 36.21,72.54 C 56.24,72.54 72.42,56.37 72.42,36.35 L 72.42,-156.31 -0.16,-156.31	 -0.16,0 0,0 0,0 z" RenderTransform="1,0,0,1,472.95,418.96" Clip="M -434.39,-156.4 L 72.65,-156.4 72.65,127.76 -434.39,127.76 z"  Fill="{Binding Source={x:Static properties:Settings.Default}, Path=accentColor, Mode=Default}" />
                    </Grid>
                </Viewbox>
            </ToggleButton>
        </Grid>
        <!--<ContentControl x:Name="Content" Content="{Binding}" ContentTemplate="{DynamicResource ContentView}"/>-->
    </Grid>

    <metro:Window.TitleBar>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal">
                <Button Grid.Column="1" Content="Audio" Style="{DynamicResource {x:Static metro:Window.DefaultCaptionButtonStyleKey}}" Click="AudioLoad"/>

                <Button Grid.Column="1" Content="Friends" Style="{DynamicResource {x:Static metro:Window.DefaultCaptionButtonStyleKey}}" Click="FriendsLoad"/>
                <Button Grid.Column="1" Content="Bookmarks" Style="{DynamicResource {x:Static metro:Window.DefaultCaptionButtonStyleKey}}" Click="BookmarksLoad"/>
                <Button Grid.Column="1" Content="Settings" Style="{DynamicResource {x:Static metro:Window.DefaultCaptionButtonStyleKey}}" Click="SettingsLoad"/>
            </StackPanel>
        </Grid>
    </metro:Window.TitleBar>
</metro:Window>
